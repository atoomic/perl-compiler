From e87b3728a5357675830d6bfe5d88876d8f62339a Mon Sep 17 00:00:00 2001
From: Nicolas Rochelemagne <rochelemagne@cpanel.net>
Date: Fri, 25 Sep 2015 12:21:49 -0500
Subject: [PATCH 151/407] B::C patch for op/coreamp.t

---
 t/CORE/op/coreamp.t | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/t/CORE/op/coreamp.t b/t/CORE/op/coreamp.t
index bcc2f1f..db23b22 100644
--- a/t/CORE/op/coreamp.t
+++ b/t/CORE/op/coreamp.t
@@ -8,12 +8,13 @@
 # Other tests for CORE subs are in coresubs.t
 
 BEGIN {
-    chdir 't' if -d 't';
-    @INC = qw(. ../lib ../dist/if);
-    require "./test.pl"; require './charset_tools.pl';
+    require "t/CORE/test.pl";
+    require "t/CORE/charset_tools.pl";
     $^P |= 0x100;
 }
 
+chdir 't/CORE';
+
 no warnings 'experimental::smartmatch';
 
 sub lis($$;$) {
@@ -1019,7 +1020,7 @@ like $@, qr'^Undefined format "STDOUT" called',
   require File::Spec::Functions;
   my $keywords_file =
    File::Spec::Functions::catfile(
-      File::Spec::Functions::updir,'regen','keywords.pl'
+      'lib','keywords.pl'
    );
   open my $kh, $keywords_file
     or die "$0 cannot open $keywords_file: $!";
-- 
2.3.8 (Apple Git-58)

