From 17b1e1fb52029cc2bbbf62dd7773b16aacc7ada7 Mon Sep 17 00:00:00 2001
From: Nicolas Rochelemagne <rochelemagne@cpanel.net>
Date: Fri, 25 Sep 2015 12:22:02 -0500
Subject: [PATCH 309/407] B::C patch for op/while.t

---
 t/CORE/op/while.t | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/t/CORE/op/while.t b/t/CORE/op/while.t
index a0f2c67..cc4596f 100644
--- a/t/CORE/op/while.t
+++ b/t/CORE/op/while.t
@@ -1,9 +1,7 @@
 #!./perl
 
 BEGIN {
-    chdir 't' if -d 't';
-    @INC = "../lib";
-    require "./test.pl";
+    require "t/CORE/test.pl";
 }
 
 plan(26);
@@ -215,9 +213,8 @@ sub save_context { $_[0] = wantarray; $_[1] }
     ok($a[0] ne $a[1]);
 }
 
-fresh_perl_is <<'72406', "foobar\n", {},
+fresh_perl_is(<<'72406', "foobar\n", {}, "[perl #72406] segv with do{}until CONST where const is not folded");
 { package o; use overload bool => sub { die unless $::ok++; return 1 } }
 use constant OK => bless [], o::;
 do{print("foobar\n");}until OK;
 72406
-    "[perl #72406] segv with do{}until CONST where const is not folded";
-- 
2.3.8 (Apple Git-58)

